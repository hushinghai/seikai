!function(a,b,c){"use strict";c.namespace("Search"),c.Search.SourceAnalytics=c.Backbone.View.extend({el:"body",events:{"click .js-search-click-action":"handleSearchActionClick","click .js-search-click-action-ajax":"handleSearchActionClickAjax"},handleSearchActionClick:function(a){this.trackSearchActionClick(a,c.Analytics.trackInternalNavigationAction)},handleSearchActionClickAjax:function(a){this.trackSearchActionClick(a,c.Analytics.analyticsAction)},trackSearchActionClick:function(b,c){var d=a(b.target);c("SearchEventsClickAction",{source:d.data("source")},{})}})}(window.jQuery,window._,window.EB,window),"function"==typeof define&&define("eb/search/search_source_analytics",["require"],function(){return EB.Search.SourceAnalytics}),define("require/apps/home_page/analytics",["require","underscore","jquery","backbone","eb/analytics"],function(a){"use strict";var b=a("underscore"),c=a("jquery"),d=a("backbone"),e=a("eb/analytics");return d.View.extend({events:{"click .js-event-link":"handleEventClick","click .js-category-link":"handleCategoryClick","click .js-organizer-cta-btn":"handleOrganizerCTAClick","click .js-bookmark-login":"handleBookmarkLoginClick","click .js-bookmark-signup":"handleBookmarkSignupClick","click .js-connect":"handleFacebookConnectClick"},initialize:function(){b.bindAll(this,"handleEventClick","handleCategoryClick","handleOrganizerCTAClick","handleBookmarkLoginClick","handleBookmarkSignupClick","trackSaveEvent","trackUnsaveEvent"),e.track("HomePage View",{}),d.Events.on("bookmark",this.trackSaveEvent),d.Events.on("unbookmark",this.trackUnsaveEvent)},handleEventClick:function(a){e.trackInternalLink("Homepage Event Card Click",{Type:c(a.currentTarget).data("type")})},handleCategoryClick:function(a){e.trackInternalLink("Homepage Category Click",{Category:c(a.currentTarget).data("category")})},handleOrganizerCTAClick:function(){e.trackInternalLink("Homepage Organizer CTA Click",{})},handleBookmarkLoginClick:function(){e.trackInternalLink("Homepage Save Lightbox Click",{Type:"login"})},handleBookmarkSignupClick:function(){e.trackInternalLink("Homepage Save Lightbox Click",{Type:"signup"})},trackSaveEvent:function(){e.track("Homepage Save Event",{Type:"save"})},trackUnsaveEvent:function(){e.track("Homepage Save Event",{Type:"unsave"})},handleFacebookConnectClick:function(){e.track("Homepage Facebook Connect Click",{})}})}),jQuery(".default_value").each(function(){default_val=this.value,old_color=this.style.color,jQuery(this).focus(function(){this.value===default_val&&(this.value="",this.style.color="#333")}),jQuery(this).blur(function(){""===this.value&&(this.value=default_val,this.style.color=old_color)})}),jQuery("form:has(.authentic, .default_value)").each(function(){var a=jQuery(this).find(".authentic"),b=jQuery(this).find(".default_value"),c=b.val();b.change(function(){this.value!==c&&a.val(this.value)})}),define("default_value",function(){}),define("eventbrite",["require","eb/csrfcookie"],function(a){"use strict";return a("eb/csrfcookie"),window.EB}),define("require/components/home/hero_view",["require","jquery","dorsal","eventbrite"],function(a){"use strict";function b(a){var b,c,d,e,f=a.el,g=window.devicePixelRatio||1,h=parseInt(a.data.padding,10),i=80*g;return f.getContext&&f.getContext("2d")?(b=f.getContext("2d"),e=a.data.font||"100 "+i+"px/"+i+'px "Omnes-Pro", "Omnes", "Helvetica Neue", "Helvetica", "Arial", sans-serif',b.font=e,c=b.measureText(a.data.text.toUpperCase()).width/g+2*h,d=parseInt(a.data.textHeight,10)+2*h,f.width=c*g,f.height=d*g,f.style.width=c,f.style.height=d,b.font=e,b.fillStyle=a.data.background,b.fillRect(0,0,c*g,d*g),b.globalCompositeOperation="destination-out",b.fillText(a.data.text.toUpperCase(),h*g,(d-h)*g),f):!1}var c=a("jquery"),d=a("dorsal"),e=(a("eventbrite"),c.Deferred());return d.registerPlugin("knockout",function(a){function d(){c(window).width()<=600?g.css(h):g.css(i)}var f=b(a);if(f){var g=c(f),h=(g.height(),{width:"80%",height:"auto"}),i={width:"auto",height:"110px"};c(window).on("resize",d),d(),e.resolve()}}),function(){c.when(e).done(function(){c(".js-knockout-container").find(".js-banner-text").addClass("show")})}}),define("gettext",["require"],function(){"use strict";return window.gettext}),define("hb!require/components/home/location.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j=c.helperMissing,k=this.escapeExpression,l="function";return i+='<div class="g-group--full-width js-location-picker hero-banner-form responsive-form">\n    <section class="js-map-canvas"></section>\n    <section class="hero-banner-form__content l-block-2">\n        <div class="g-grid">\n            <div class="g-cell g-cell-12-12">\n                <div class="l-block-4">\n                    <span class="subtitle">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Find experiences in",h):j.call(b,"_","Find experiences in",h)))+'</span>\n                </div>\n                <div class="l-block-1">\n                    <a class="title js-display-location text--truncated">\n                        <span>',(g=c.displayLocation)?g=g.call(b,{hash:{},data:e}):(g=b&&b.displayLocation,g=typeof g===l?g.call(b,{hash:{},data:e}):g),i+=k(g)+'</span> <i class="ico-circle-cross"></i>\n                    </a>\n                </div>\n                <div class="l-block-1 js-location-form hero-banner-form__row is-hidden">\n                    <div class="responsive-form__input--icon">\n                        <div class="responsive-form__input--icon__container">\n                            <i class="ico-location ico--color-brand-blue"></i>\n                        </div>\n                        <input type="text" class="js-location-input hero-banner-form__input" placeholder="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Enter Location",h):j.call(b,"_","Enter Location",h)))+'" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</div>\n'})}),define("require/mixins/autocomplete_mixin",["require","jquery","jquery_autocomplete"],function(a){"use strict";var b=a("jquery");return a("jquery_autocomplete"),function(a){a._highlightText=function(a,c){var d,e;return d=b.ui.autocomplete.escapeRegex(c).split("\\ "),e=new RegExp("("+d.join("|")+")","ig"),a.replace(e,'<span class="text-body--significant">$1</span>')},a._renderItem=function(a,c){return b("<li></li>").data("item.autocomplete",c).append(b("<a></a>").html(c.label)).appendTo(a)},a._populateAutocomplete=function(){b(this).autocomplete("search")}}}),define("require/components/home/location_map_config",["require"],function(){"use strict";var a=[{stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"road.arterial",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"road.highway",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#ffdf8e"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#33bbff"}]},{},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffce5b"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{weight:.9},{visibility:"off"}]}],b={lat:29.9304925,lon:-95.5413065};return{centerOfTheWorld:b,mapOptions:{mapTypeId:"roadmap",zoom:14,minZoom:14,maxZoom:14,disableDefaultUI:!0,draggableCursor:"default",draggable:!1,styles:a}}}),define("jquery_cookie",["require"],function(){"use strict";return window.jQuery.cookie}),/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function(a,b){a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):(this.opts=f(a||{},h.defaults,n),void 0)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),define("vendor/spin-1.3",function(){}),function(){"use strict";var a={lines:12,length:2,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#ffffff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner--small",zIndex:1,top:"auto",left:"auto"},b=_.extend({},a,{length:3,width:3,radius:7,className:"spinner--medium"}),c=_.extend({},a,{length:5,width:4,radius:9,className:"spinner--large"});EB.namespace("SpinSettings"),EB.SpinSettings={small:a,medium:b,large:c}}(),define("vendor/spin-1.3_settings",function(){}),function(a){"use strict";function b(b,c){var d=a("<div>",{"class":"layout-overlay"});return b.each(function(b,c){var d=a(c);"static"===d.css("position")&&d.css("position","relative")}),c&&d.addClass("layout-overlay--visible"),b.append(d),d}function c(a){a.find(".layout-overlay").remove()}function d(a){var b=EB.SpinSettings.large;return a.hasClass("btn--small")&&(b=EB.SpinSettings.small),a.hasClass("btn--medium")&&(b=EB.SpinSettings.medium),new window.Spinner(_.extend({},b,{top:0}))}function e(e,f,g){var h,i,j=a(e),k=a("<span>",{style:"display: inline;"}),l=d(j),m=a(g);return"block"===j.css("display")&&(k=a("<div>")),j.wrap(k),j.addClass("btn--has-spinner"),l.spin(j.get(0)),h=b(j.parent()),i=b(m),f.always(_.bind(c,null,m.add(j.parent()))).always(function(){l.stop(),j.unwrap(),j.removeClass("btn--has-spinner")}),{buttonOverlay:h,sectionOverlay:i,spinner:l}}function f(d,e){var f,g=a(d),h=new window.Spinner(_.extend({},EB.SpinSettings.large,{color:"#000000"}));return h.spin(g.get(0)),f=b(g,!0),e.always(_.bind(c,null,g)).always(function(){h.stop()}),{overlay:f,spinner:h}}EB.namespace("UIComponents"),EB.UIComponents.Loader={createButtonLoader:e,createSectionLoader:f}}(jQuery),define("eb/ui_components/loader",function(){}),define("require/components/home/location_view",["require","jquery","backbone","underscore","eventbrite","eb/analytics","gettext","hb!./location.handlebars","require/mixins/autocomplete_mixin","require/components/home/location_map_config","marionette","jquery_autocomplete","jquery_cookie","vendor/spin-1.3","vendor/spin-1.3_settings","eb/ui_components/loader"],function(a){"use strict";var b=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("eventbrite"),f=a("eb/analytics"),g=a("gettext"),h=a("hb!./location.handlebars"),i=a("require/mixins/autocomplete_mixin"),j=a("require/components/home/location_map_config");return a("marionette"),a("jquery_autocomplete"),a("jquery_cookie"),a("vendor/spin-1.3"),a("vendor/spin-1.3_settings"),a("eb/ui_components/loader"),c.Marionette.ItemView.extend({template:h,events:{"click .js-display-location":"handleDisplayLocationClick","blur .js-location-input":"handleLocationInputBlur","keydown .js-location-input":"handleLocationInputKeydown"},initialize:function(a){d.bindAll(this,"drawMap","showMap","resizeMap","centerMap","getSuggestions","getMapOptions","handleAutocompletePlaceChange","handleLocationChanged","initLocationAutocomplete","renderAutocompleteMenu","handleDisplayLocationClick","handleLocationInputBlur","handleLocationInputKeydown","initLocationForm","activeLocationForm"),this.location=a.location,this.initSelectors(),this.initLocationForm(),this.hasResults=!1,new i(this),this.initLocationAutocomplete(),this.drawMap()},initSelectors:function(){this.$mapCanvas=this.$(".js-map-canvas"),this.$locationInput=this.$(".js-location-input"),this.$locationForm=this.$(".js-location-form"),this.$locationInputContainer=this.$locationInput.parent(),this.$displayLocation=this.$(".js-display-location")},serializeData:function(){return{displayLocation:this.location.displayLocation}},onRender:function(){this.initSelectors()},initLocationForm:function(){this.$locationForm.hide(),this.$locationForm.width(this.$displayLocation.outerWidth()),this.$locationInputContainer.css("margin-left","-60px")},activeLocationForm:function(){this.$locationForm.css("width","100%"),this.$locationInputContainer.css("margin-left","0"),this.$locationInput.focus()},handleDisplayLocationClick:function(){this.$displayLocation.hide(),this.$locationForm.show(0,this.activeLocationForm),this.$el.addClass("is-active"),setTimeout(this.resizeMap,200)},handleLocationInputBlur:function(){this.$displayLocation.show(),this.initLocationForm(),this.$el.removeClass("is-active"),this.$locationInput.val("")},handleLocationInputKeydown:function(a){13===a.which&&this.handleLocationChanged(this.$locationInput.val())},initLocationAutocomplete:function(){"undefined"!=typeof google&&"undefined"!=typeof google.maps.places&&"undefined"!=typeof google.maps.places.AutocompleteService&&(this.locationAutocomplete=new google.maps.places.AutocompleteService,this.$locationInput.autocomplete({minLength:2,select:this.handleAutocompletePlaceChange,source:this.getSuggestions,delay:100}).data("autocomplete")._renderMenu=this.renderAutocompleteMenu)},renderAutocompleteMenu:function(a,c){var d=this,e=this.$locationInput.val();a.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all noresults"),a.addClass("ui-autocomplete__light js-location-autocomplete"),this.hasResults||a.addClass("noresults"),b.each(c,function(b,c){c.label=d._highlightText(c.description,e),c.value=c.description,d._renderItem(a,c)}),b(".js-location-autocomplete").css("max-width",this.$locationInputContainer.width()+"px")},getSuggestions:function(a,b){var c=this;this.locationAutocomplete.getPlacePredictions({input:a.term,types:["geocode"]},function(a){a?c.hasResults=!0:(a=[{description:g("Hmm, weâ€™ve never heard of this place.")}],c.hasResults=!1),b(a)})},handleAutocompletePlaceChange:function(a,b){var c=b.item.description;return this.$locationInput.val(b.item.description),this.handleLocationChanged(c),!1},handleLocationChanged:function(a){return this.hasResults?(b.cookie("loc",a,{path:"/",expires:1}),f.trackInternalLink("Location Changed",{Source:"Homepage banner"}),this.updatePage(a),void 0):(this.$locationInput.val(""),void 0)},updatePage:function(a){this.$displayLocation.find("span").text(a.split(",")[0]),this.$displayLocation.find("i").hide(),this.$locationInput.trigger("blur").prop("disabled",!0),e.UIComponents.Loader.createSectionLoader(this.$displayLocation,b.Deferred()),delete this.events["click .js-display-location"],this.delegateEvents(),window.location.reload(!0)},getMapOptions:function(){var a=j.centerOfTheWorld,b=j.mapOptions;return this.location.lat&&this.location.lon&&(a=this.location),b.center=new google.maps.LatLng(a.lat,a.lon),b},showMap:function(){this.$mapCanvas.addClass("hero-banner-form__background"),this.resizeMap()},centerMap:function(){this.map.setCenter(this.mapCenter)},resizeMap:function(){"undefined"!=typeof google&&google.maps.event.trigger(this.map,"resize")},drawMap:function(){"undefined"!=typeof google&&(google.maps.visualRefresh=!0,this.map=new google.maps.Map(this.$mapCanvas[0],this.getMapOptions()),this.mapCenter=this.map.center,google.maps.event.addListener(this.map,"idle",this.showMap),google.maps.event.addListenerOnce(this.map,"idle",this.centerMap),google.maps.event.addListener(this.map,"click",this.handleLocationInputBlur))}})}),function(a,b){if(!a.Facebook||!a.Facebook.ready){var c=!1,d="/ajax/social/disconnect",e="badperms",f="connected",g=[],h=!1,i={authResponse:null,status:"unknown"},j="EB.Facebook.hasPerms",k="0",l="1",m={streamPublish:"efbnen",streamPublishAction:"efbnreg",inviteFriends:"efbinvt"},n={scope:"email",locale:"en_US",internalReferrer:"0",skipAnalytics:!1},o=function(a){s.clear(),FB.login(function(){q(a)},{scope:n.scope})},p=function(a){s.clear(),b.ajax({type:"POST",url:d,data:{},cache:!1,dataType:"json",success:function(b){b&&b.success&&FB.logout(a)},error:function(){FB.logout(),"function"==typeof a&&setTimeout(a,250)}})},q=function(a){FB.getLoginStatus(function(c){c&&c.status===f?t({success:function(){"function"==typeof a&&a(c)},failure:function(){c.status=e,"function"==typeof a&&a(c)}}):(s.clear(),"function"==typeof a&&a(c)),b.extend(i,c)})},r=function(){return FB.getUserID()},s={get:function(){return window.localStorage?window.localStorage.getItem(j):null},set:function(a){window.localStorage&&window.localStorage.setItem(j,a)},clear:function(){window.localStorage&&window.localStorage.removeItem(j)}},t=function(a){return s.get()==l?(a.success(),void 0):s.get()==k?(a.failure(),void 0):(FB.api("/me/permissions",function(b){if(b&&b.data&&b.data[0]){var c,d=n.scope.split(/\s*,\s*/),e=b.data[0];for(c=0;c<d.length;++c)if(!(d[c]in e))return s.set(k),a.failure(),void 0;s.set(l),a.success()}}),void 0)},u=function(a){return function(c){var d=a.name;return a.pageModule&&(d=a.pageModule+"_"+a.name),c&&(d=d+"_"+c),b.extend({},a,{name:d})}},v=function(d){if(!c)return o(function(a){a.status===f&&v(d)}),void 0;var e=d.event,g=u({name:"streampublish",category:"facebook",pageModule:d.pageModule});n.skipAnalytics||(d.module?a.Analytics.recordAction(g(d.module+"_click")):a.Analytics.recordAction(g("click")));var h={},i="";e.location&&(h[gettext("Location")]=a.util.truncate(e.location,70)),e.time&&(h[gettext("Time")]=a.util.truncate(e.time,70)),e.host&&e.host_href&&(h[gettext("Hosted By")]={text:a.util.truncate(e.host,50),href:e.host_href}),i="organizer"===d.usertype?interpolate(gettext("%(actor)s just created %(event_name)s on Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0):"attendee"===d.usertype?interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0):interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0);var j={name:"Eventbrite - "+e.name,caption:i,properties:h,href:e.base_url+"/"+m.streamPublish,media:[{type:"image",src:e.image,href:e.href}]};FB.ui({method:"stream.publish",display:"dialog",attachment:j,action_links:[{text:e.action_text,href:e.base_url+"/"+m.streamPublishAction}]},function(c){c&&c.post_id?(n.skipAnalytics||a.Analytics.recordAction(b.extend({},g(),{id:c.post_id})),"function"==typeof d.success&&d.success()):(n.skipAnalytics||(c&&c.error?a.Analytics.recordAction(g("error")):a.Analytics.recordAction(g("cancel"))),"function"==typeof d.error&&d.error())})},w=function(d){if(!c)return o(function(a){a.status===f&&v(d)}),void 0;var e=d.event,g=u({name:"streampublish",category:"facebook",pageModule:d.pageModule});n.skipAnalytics||(d.module?a.Analytics.recordAction(g(d.module+"_click")):a.Analytics.recordAction(g("click")));var h={},i="";e.location&&(h[gettext("Location")]=a.util.truncate(e.location,70)),e.time&&(h[gettext("Time")]=a.util.truncate(e.time,70)),e.host&&e.host_href&&(h[gettext("Hosted By")]={text:a.util.truncate(e.host,50),href:e.host_href}),i="organizer"===d.usertype?interpolate(gettext("%(actor)s just created %(event_name)s on Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0):"attendee"===d.usertype?interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0):interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:e.name},!0),FB.ui({method:"feed",display:"dialog",link:e.base_url+"/"+m.streamPublish,picture:e.image,name:"Eventbrite - "+e.name,caption:i,description:a.util.truncate(e.description,300),properties:h,actions:[{name:e.action_text,link:e.base_url+"/"+m.streamPublishAction}]},function(c){c&&c.post_id?(n.skipAnalytics||a.Analytics.recordAction(b.extend({},g(),{id:c.post_id})),"function"==typeof d.success&&d.success()):(n.skipAnalytics||(c&&c.error?a.Analytics.recordAction(g("error")):a.Analytics.recordAction(g("cancel"))),"function"==typeof d.error&&d.error())})},x=function(d){if(!c)return o(function(a){a.status===f&&v(d)}),void 0;var e=d.event,g=u({name:"streampublish",category:"facebook",pageModule:d.pageModule});n.skipAnalytics||(d.module?a.Analytics.recordAction(g(d.module+"_click")):a.Analytics.recordAction(g("click"))),FB.ui({display:"dialog",method:"share",href:e.base_url+"/"+m.streamPublishAction},function(c){c&&c.post_id?(n.skipAnalytics||a.Analytics.recordAction(b.extend({},g(),{id:c.post_id})),"function"==typeof d.success&&d.success()):(n.skipAnalytics||(c&&c.error?a.Analytics.recordAction(g("error")):a.Analytics.recordAction(g("cancel"))),"function"==typeof d.error&&d.error())})},y=function(a){"function"==typeof a&&(h?a():g.push(a))},z=function(){var a;for(a=0;a<g.length;++a)g[a]();g=[]},A=function(){!function(a){var b,c="facebook-jssdk";a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/"+n.locale+"/all.js",a.getElementsByTagName("head")[0].appendChild(b))}(document)},B=function(d){b.extend(n,d),window.fbAsyncInit=function(){FB.init({appId:n.appId,oauth:!0,cookie:!0,status:!0,xfbml:!0,channelUrl:"/facebook-sdk"}),FB.Event.subscribe("auth.authResponseChange",function(b){b.status===f?(c=b.authResponse?!0:!1,n.skipAnalytics||a.Analytics.recordAction({name:"connect",category:"facebook"})):c=!1}),FB.Event.subscribe("edge.create",function(b,c){for(var d="like",e=c&&c.dom;e;){if("eb_header"===e.id){d+="hdr";break}e=e.parentElement}n.skipAnalytics||a.Analytics.recordAction({name:d,category:"facebook"})}),z(),h=!0},d.deferSDKLoad||A()};a.Facebook={init:B,loadFacebookSDK:A,login:o,logout:p,getLoginStatus:q,getFbId:r,ready:y,shareEvent:v,shareEvent2:w,shareEvent3:x,isConnected:function(){return i.status===a.Facebook.FB_STATUS_CONNECTED},FB_STATUS_CONNECTED:f,FB_STATUS_BADPERMS:e,streamPublish:v,loginStatus:i}}}(window.EB,window.jQuery),"function"==typeof define&&define("eb/social/facebook",[],function(){"use strict";return EB.Facebook}),define("hb!require/components/facebook/facebook.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='<div class="l-align-center l-padded-v-1">\n    <h3 class="l-block-4">\n        <i class="ico-friends fb-connect-card__icon"></i>\n    </h3>\n    <div class="text-heading-secondary l-padded-v-bottom-3 l-block-1">\n        ',g={hash:{},data:e},h+=j((f=c._||b&&b._,f?f.call(b,"Connect to see the events your Facebook friends are attending",g):i.call(b,"_","Connect to see the events your Facebook friends are attending",g)))+'\n    </div>\n    <a href="#" class="btn btn--ico btn--facebook fb-connect-card__btn js-connect">\n        <span><i class="ico-facebook-logo ico--large"></i>',g={hash:{},data:e},h+=j((f=c._||b&&b._,f?f.call(b,"Connect",g):i.call(b,"_","Connect",g)))+"</span>\n    </a>\n</div>\n"})}),define("require/components/facebook/facebook_view",["require","jquery","backbone","underscore","eventbrite","eb/social/facebook","hb!./facebook.handlebars","eb/analytics","marionette"],function(a){"use strict";var b=a("jquery"),c=a("backbone"),d=a("underscore"),e=(a("eventbrite"),a("eb/social/facebook")),f=a("hb!./facebook.handlebars"),g=a("eb/analytics");return a("marionette"),c.Marionette.ItemView.extend({template:f,tagName:"div",className:"g-cell g-cell-1-1 g-cell-md-1-2 g-cell-lg-1-3 l-padded-v-bottom-3",events:{"click .js-connect":"handleFacebookConnect","click .js-disconnect":"handleFacebookDisconnect"},initialize:function(a){d.bindAll(this,"handleFacebookConnect","handleFacebookDisconnect","processConnect","refreshPopularEvents","setConnectStatus"),this.connectStatus="unknown",this.fbReady=!1,e.init({appId:a.appId,locale:a.locale});var c=b.Deferred();c.done(this.setConnectStatus),e.ready(function(){e.getLoginStatus(function(a){c.resolve(a.status)})})},setConnectStatus:function(a){this.connectStatus=a,this.fbReady=!0},processConnect:function(a){"connected"===a.status&&(b.post("/social/facebook/connect/",{iref:12}).done(this.refreshPopularEvents),g.trackInternalLink("Homepage Facebook Connect Successful",{}))},handleFacebookConnect:function(a){a.preventDefault(),this.fbReady&&("connected"===this.connectStatus?this.refreshPopularEvents():e.login(this.processConnect))},handleFacebookDisconnect:function(a){a.preventDefault(),this.fbReady&&e.logout(this.refreshPopularEvents)},refreshPopularEvents:function(){this.fbReady=!1,this.$(".js-connect").addClass("btn--large--loader"),window.location.reload(!0)}})}),function(a){"use strict";a.namespace("Models"),a.Models.EventModel=a.Backbone.Model.extend({defaults:{is_free:!0,is_live:!1,is_repeating:!1,repeating:"never",is_atd:!0,capacity:0,is_series:!1},validation:{capacity:[{fn:function(a){return!$.isNumeric(a)||parseInt(a,10)<0?window.gettext("Please enter a number"):a&&a.indexOf(".")>-1?window.gettext("Please enter a whole number"):void 0}}]},initialize:function(){this.on("change:repeating",this.setIsRepeating),this.setIsRepeating()},setDefaultCapacity:function(a){0===this.get("capacity")&&this.set("capacity",a.sumQuantity())},setIsRepeating:function(){var a=this.get("repeating");"never"===a||_.isEmpty(a)?this.set("is_repeating",!1):this.set("is_repeating",!0)},isPossiblyCCP:function(){return this.get("currency").isCCP()&&(!this.get("has_payment_type")||this.get("accept_eventbrite"))}}),a.Models.EventModel.EVENT_DELETED=80,"function"==typeof define&&define("require/entities/event_model",[],function(){return a.Models.EventModel})}(window.EB),define("require/components/featured_events/featured_events_collection",["require","underscore","backbone","../../entities/event_model"],function(a){"use strict";var b=(a("underscore"),a("backbone")),c=a("../../entities/event_model");return b.Collection.extend({model:c,url:function(){return"/social/featured-events/?lat="+this.lat+"&lon="+this.lon}})}),define("hb!require/components/featured_events/collection.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n<header class="g-cell g-cell-1-1 l-block-4">\n    <h2 class="text-heading-primary">',e={hash:{},data:b},f+=j((d=c._||a&&a._,d?d.call(a,"Featured Events",e):i.call(a,"_","Featured Events",e)))+'</h2>\n</header>\n<section class="g-group js-featured-event-cards"></section>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=c.helperMissing,j=this.escapeExpression,k=this;return g=c["if"].call(b,b&&b.collectionLength,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"})}),define("hb!require/components/event_card/poster_card.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n            <li>\n                <span class="text-body--faint text--truncated">\n                    ',(d=c.start_date_formatted)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start_date_formatted,d=typeof d===n?d.call(a,{hash:{},data:b}):d),e+=o(d)+"\n                </span>\n            </li>\n"}function g(a,b){var d,e="";return e+='\n            <li class="l-block-1">\n                <span class="text-body--faint text--truncated">\n                    ',(d=c.address_short)?d=d.call(a,{hash:{},data:b}):(d=a&&a.address_short,d=typeof d===n?d.call(a,{hash:{},data:b}):d),e+=o(d)+"\n                </span>\n            </li>\n"}function h(){return"bookmarked"}function i(){return"ico-bookmarked"}function j(){return"ico-bookmark"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.helperMissing;return m+='<div class="event-card event-card--poster js-event-link l-block-2 js-d-poster" data-type="',(k=c.type)?k=k.call(b,{hash:{},data:e}):(k=b&&b.type,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'">\n    <div class="event-card--poster__header l-padded-h-2">\n        <div class="event-card__image img-90">\n            <img class="js-poster-image" src="',(k=c.image_url)?k=k.call(b,{hash:{},data:e}):(k=b&&b.image_url,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'" alt="',(k=c.name)?k=k.call(b,{hash:{},data:e}):(k=b&&b.name,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'" />\n        </div>\n        <div class="js-poster-decoration event-card--poster__decoration event-card--poster__decoration__top-left"></div>\n        <div class="js-poster-decoration event-card--poster__decoration event-card--poster__decoration__top-right"></div>\n        <div class="js-poster-decoration event-card--poster__decoration event-card--poster__decoration__bottom-left"></div>\n        <div class="js-poster-decoration event-card--poster__decoration event-card--poster__decoration__bottom-right"></div>\n    </div>\n    <div class="event-card__description l-padded-h-2">\n        <h3 class="text-body-large">\n            <a class="event-card__description--title" href="',(k=c.url)?k=k.call(b,{hash:{},data:e}):(k=b&&b.url,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'">\n                <span class="js-xd-preferred-link l-block-3  text--truncated-two-line">\n                    ',(k=c.name)?k=k.call(b,{hash:{},data:e}):(k=b&&b.name,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'\n                </span>\n            </a>\n        </h3>\n        <ul class="l-block-2">\n',k=c["if"].call(b,b&&b.start_date_formatted,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(k||0===k)&&(m+=k),m+="\n",k=c["if"].call(b,b&&b.hasVenue,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(k||0===k)&&(m+=k),m+='\n        </ul>\n    </div>\n    <div class="event-card__footer l-padded-v-3 clrfix">\n        <section class="l-padded-h-2" style="float: left">\n            <a class="bookmark js-d-bookmark ',k=c["if"].call(b,b&&b.bookmarked,{hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e}),(k||0===k)&&(m+=k),m+='" data-eid="',(k=c.id)?k=k.call(b,{hash:{},data:e}):(k=b&&b.id,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'" data-bookmarked="',(k=c.bookmarked)?k=k.call(b,{hash:{},data:e}):(k=b&&b.bookmarked,k=typeof k===n?k.call(b,{hash:{},data:e}):k),m+=o(k)+'">\n                <i class="',k=c["if"].call(b,b&&b.bookmarked,{hash:{},inverse:p.program(9,j,e),fn:p.program(7,i,e),data:e}),(k||0===k)&&(m+=k),m+=' ico--large"></i>\n                <span class="bookmark__tip">',l={hash:{},data:e},m+=o((k=c._||b&&b._,k?k.call(b,"Save",l):q.call(b,"_","Save",l)))+"</span>\n            </a>\n        </section>\n    </div>\n</div>\n"})}),define("require/components/event_card/poster_card_item_view",["require","marionette","hb!./poster_card.handlebars"],function(a){"use strict";var b=a("marionette"),c=a("hb!./poster_card.handlebars");return b.ItemView.extend({className:"g-cell g-cell-1-1 g-cell-md-1-2 g-cell-lg-1-3 l-padded-v-bottom-3",template:c,initialize:function(a){this.type=a.type},templateHelpers:function(){return{hasVenue:"None"!==this.model.get("address_short")?this.model.get("address_short"):!1,type:this.type}}})}),define("require/components/featured_events/collection_view",["require","underscore","dorsal","marionette","eb-styleguide/js/ui_components/poster/poster_view","./featured_events_collection","hb!./collection.handlebars","../event_card/poster_card_item_view"],function(a){"use strict";var b,c=a("underscore"),d=a("dorsal"),e=a("marionette"),f=(a("eb-styleguide/js/ui_components/poster/poster_view"),a("./featured_events_collection")),g=a("hb!./collection.handlebars"),h=a("../event_card/poster_card_item_view"),i=12;return b=e.CompositeView.extend({template:g,itemViewContainer:".js-featured-event-cards",itemView:h,itemViewOptions:{type:"feature"},initPosters:function(){c.each(this.$(".js-d-poster"),function(a){d.rewire(a,"poster")})},addItemView:function(a,b,c){return i>c?e.CompositeView.prototype.addItemView.call(this,a,b,c):void 0},onCompositeRendered:function(){window.setTimeout(c.bind(function(){this.initPosters()},this),0)},templateHelpers:function(){return{collectionLength:this.collection&&this.collection.length||0}}}),{_class:b,create:function(a){var c=new f(a.data||[]);return c.lat=a.lat,c.lon=a.lon,new b({lat:a.lat,lon:a.lon,collection:c})}}}),define("hb!require/components/saved_events/collection.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n<header class="g-cell g-cell-1-1 l-block-4">\n    <h2 class="text-heading-primary">',e={hash:{},data:b},f+=j((d=c._||a&&a._,d?d.call(a,"Saved Events",e):i.call(a,"_","Saved Events",e)))+'</h2>\n</header>\n<section class="g-group js-saved-event-cards"></section>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=c.helperMissing,j=this.escapeExpression,k=this;return g=c["if"].call(b,b&&b.collectionLength,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"})}),define("require/components/saved_events/saved_events_collection",["require","../featured_events/featured_events_collection"],function(a){"use strict";var b=a("../featured_events/featured_events_collection");return b.extend({url:function(){return"/social/saved-events/"},parse:function(a){return a.events}})}),define("require/components/saved_events/collection_view",["require","../featured_events/collection_view","hb!./collection.handlebars","./saved_events_collection"],function(a){"use strict";var b,c=a("../featured_events/collection_view"),d=a("hb!./collection.handlebars"),e=a("./saved_events_collection");return b=c._class.extend({template:d,itemViewContainer:".js-saved-event-cards",itemViewOptions:{type:"saved"}}),{_class:b,create:function(a){var c=new e(a.data||[]);return new b({collection:c})}}}),define("require/components/saved_events/bookmark_view",["require","dorsal","jquery","underscore","backbone","eventbrite","eb-styleguide/js/ui_components/modal/modal_view"],function(a){"use strict";var b,c=a("dorsal"),d=a("jquery"),e=a("underscore"),f=a("backbone"),g=a("eventbrite"),h=a("eb-styleguide/js/ui_components/modal/modal_view");return b=f.View.extend({events:{click:"handleBookmarkClick"},initialize:function(a){f.View.prototype.initialize.apply(this,arguments),e.bindAll(this,"handleEventBookmarked","handleEventUnbookmarked","handleBookmarkClick","showLoginModal"),this.eventId=a.eventId||this.$el.data("eid"),this.bookmarked=a.bookmarked||this.$el.data("bookmarked"),f.Events.on("bookmarked",this.handleEventBookmarked),f.Events.on("unbookmarked",this.handleEventUnbookmarked)},handleBookmarkClick:function(a){return a.stopPropagation(),g.getUid()?(this.bookmarked?f.Events.trigger("unbookmark",{eid:this.eventId}):f.Events.trigger("bookmark",{eid:this.eventId}),void 0):(this.showLoginModal(),void 0)},showLoginModal:function(){var a,b,c=this;a=new h,a.open({items:{src:"#bookmark-login-popup"}}),b=a.$modalEl.find("a"),b.each(function(a,b){var e=d(b).attr("href");e=e.substr(0,e.indexOf("?")),e+="?referrer="+encodeURIComponent(window.location.pathname+"?bookmarkEvent="+c.eventId),d(b).attr("href",e)})},handleEventBookmarked:function(a){this.eventId===a.eid&&(this.$el.addClass("bookmarked"),this.$("i").removeClass("ico-bookmark").addClass("ico-bookmarked"),this.bookmarked=!0)},handleEventUnbookmarked:function(a){this.eventId===a.eid&&(this.$el.removeClass("bookmarked"),this.$("i").removeClass("ico-bookmarked").addClass("ico-bookmark"),this.bookmarked=!1)}}),c.registerPlugin("bookmark",function(a){var c=new b(a).render();return c}),b}),/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release
function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]=d[i]!==j?[d[i],g]:g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,b.handler=c,void 0)}})}(jQuery,this),/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// This working example, complete with fully commented code, illustrate one way
// in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and robust,
// there are a few unfortunate browser bugs surrounding expected hashchange
// event-based behaviors, independent of any JavaScript window.onhashchange
// abstraction. See the following examples for more information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// About: Release History
// 
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.
function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=a.browser,k=document.documentMode,l=j.msie&&(k===c||8>k),m="on"+h in b&&!l;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){return m?!1:(a(e.start),void 0)},teardown:function(){return m?!1:(a(e.stop),void 0)}}),e=function(){function c(){j=k=function(a){return a},l&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,k=function(){return d(f.document[g][i])},j=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}},j(d()))}var e,f,j,k,m={};return m.start=function(){if(!e){var f=d();j||c(),function l(){var c=d(),m=k(f);c!==f?(j(f=c,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(l,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),define("jquery.ba-bbq.1.2.1",function(){}),define("require/components/saved_events/bookmark_controller",["require","backbone","eventbrite","underscore","eb-styleguide/js/ui_components/modal/modal_view","eb/social/facebook","jquery.ba-bbq.1.2.1"],function(a){"use strict";var b=a("backbone"),c=a("eventbrite"),d=a("underscore"),e=a("eb-styleguide/js/ui_components/modal/modal_view"),f=a("eb/social/facebook");return a("jquery.ba-bbq.1.2.1"),b.View.extend({initialize:function(a){a=a||{},b.View.prototype.initialize.apply(this,arguments),d.bindAll(this,"bookmarkEvent","unbookmarkEvent","updateBookmarkUrl"),b.Events.on("bookmark",this.bookmarkEvent),b.Events.on("unbookmark",this.unbookmarkEvent),this.bookmarkUrl="/social/user/tracked_events/",a.fbAppId&&(f.init({appId:a.fbAppId}),f.ready(this.updateBookmarkUrl)),this.parseUrl()},updateBookmarkUrl:function(){f.getFbId()&&(this.bookmarkUrl="/social/user/1/"+f.getFbId()+"/tracked_events/")},parseUrl:function(){var a=$.deparam.querystring();a.bookmarkEvent&&$.isNumeric(a.bookmarkEvent)&&(this.bookmarkEvent({eid:parseInt(a.bookmarkEvent,10),showSuccess:!0}),window.location.hash="",history&&history.pushState&&history.pushState("",document.title,window.location.pathname))},bookmarkEvent:function(a){c.getUid()&&$.post(this.bookmarkUrl,{event_id:a.eid}).done(function(){b.Events.trigger("bookmarked",a),a.showSuccess&&(new e).open({items:{src:"#bookmark-success-popup"}})})},unbookmarkEvent:function(a){c.getUid()&&$.ajax({type:"DELETE",url:this.bookmarkUrl+a.eid+"/"}).done(function(){b.Events.trigger("unbookmarked",{eid:a.eid})})}})}),require(["eb/require_base_config","eb/require_app_config","eb/search/search_source_analytics","require/apps/home_page/analytics","default_value","dorsal","require/components/home/hero_view","require/components/home/location_view","require/components/facebook/facebook_view","require/components/featured_events/collection_view","require/components/saved_events/collection_view","require/components/saved_events/bookmark_view","require/components/saved_events/bookmark_controller"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";if(new c,new d({el:$("body")}),b.featureFlags.locationPicker?(new h({el:$(".js-location-picker"),location:b.searchLocation}),f.wire($("body")[0])):f.wire($("body")[0]).done(function(){g()}),b.featureFlags.eventbriteUserBookmarks){new m({fbAppId:b.facebookOptions.appId})}if(b.savedEvents.length){var n=k.create({data:b.savedEvents});$(".js-module-container").prepend(n.render().$el)}if(b.featureFlags.featuredEventsV2&&b.featuredEvents.length&&!b.featureFlags.nyeEvents){var o=j.create({lat:b.searchLocation.lat,lon:b.searchLocation.lon,data:b.featuredEvents});$(".js-featured-events-container").append(o.render().$el).removeClass("is-hidden")}if(b.featureFlags.friendsEvents){var p=new i(b.facebookOptions);b.facebookOptions.showConnect&&$(".js-see-more-events-btn").before(p.render().$el)}}),define("require/apps/home_page/app",function(){});